<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }
    h1 {
      font-weight: 700;
    }
    #controls {
      margin: 10px 0;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    #timeline {
      height: 500px;
      width: 90%;
      overflow-x: scroll; /* Horizontalus slinkimas */
    }
    #slider {
      width: 300px;
    }
  </style>
</head>
<body>
  <h1>Atostogų grafikas</h1>
  <div id="controls">
    <button onclick="zoomIn()">Priartinti</button>
    <button onclick="zoomOut()">Atitolinti</button>
    <input type="range" id="slider" min="10" max="365" value="30" oninput="adjustZoom(this.value)">
  </div>
  <div id="timeline"></div>

  <script>
    google.charts.load('current', { packages: ['timeline'], language: 'lt' });
    google.charts.setOnLoadCallback(drawChart);

    let chart, data, options;

    function drawChart() {
      const container = document.getElementById('timeline');
      chart = new google.visualization.Timeline(container);

      data = new google.visualization.DataTable();
      data.addColumn('string', 'Darbuotojas');
      data.addColumn('date', 'Pradžia');
      data.addColumn('date', 'Pabaiga');

      // Pavyzdiniai duomenys
      data.addRows([
        ['Jonas', new Date(2025, 0, 5), new Date(2025, 0, 15)],
        ['Petras', new Date(2025, 0, 10), new Date(2025, 0, 20)],
        ['Margarita', new Date(2025, 1, 1), new Date(2025, 1, 5)],
        ['Edita', new Date(2025, 6, 15), new Date(2025, 6, 25)],
      ]);

      options = {
        timeline: { groupByRowLabel: true },
        hAxis: {
          format: 'MMM dd',
          viewWindow: {
            min: new Date(2025, 0, 1),
            max: new Date(2025, 1, 1) // Pradinis zoom intervalas (1 mėnuo)
          },
          textStyle: {
            fontSize: 12,
            bold: true
          }
        },
        colors: ['#1E90FF', '#FF6347', '#32CD32', '#FFD700']
      };

      chart.draw(data, options);
    }

    // Zoom funkcijos
    function zoomIn() {
      const min = options.hAxis.viewWindow.min;
      const max = options.hAxis.viewWindow.max;

      min.setDate(min.getDate() + 5); // Priartina 5 dienomis
      max.setDate(max.getDate() - 5);

      chart.draw(data, options);
    }

    function zoomOut() {
      const min = options.hAxis.viewWindow.min;
      const max = options.hAxis.viewWindow.max;

      min.setDate(min.getDate() - 5); // Atitolina 5 dienomis
      max.setDate(max.getDate() + 5);

      chart.draw(data, options);
    }

    // Slankiklio funkcija
    function adjustZoom(days) {
      const min = new Date(2025, 0, 1); // Pradžios taškas
      const max = new Date(min.getTime() + days * 24 * 60 * 60 * 1000); // Dienų skaičius nuo pradžios

      options.hAxis.viewWindow = {
        min: min,
        max: max
      };

      chart.draw(data, options);
    }
  </script>
</body>
</html>
